# 二叉树

### 1. 基本分类

- 二叉搜索树:左节点<=根节点<=右节点
- 满二叉树:每个节点有两个子
- 完全二叉树:满二叉树去除后面的节点(**不一定是平衡二叉树**)
- 平衡二叉树:**是二叉搜索树**且子树高度差小于2



### 2. 二叉搜索树

1. $\mathbb{E(\text{height})}=\log N$
2. 使用$2^{\mathbb{E}(X)}\leq\mathbb{E}(2^X)$



### 3. 红黑树

 	1. 定义
 	 - 根节点为黑
 	 - 无连续红节点
 	 - 叶节点黑色高度相同 (可以压缩红节点变成2,3.4树)
 	2. 插入方法
 	- 新节点始终为**红色**,如果父节点为红(黑色不用考虑),则判断aunt节点
 	- 如果aunt为红
 	  - 上色父辈为黑,祖父为红,并**递归**
 	  - 递归结束,设置root为黑
 	- 如果aunt为黑或者没有
 	  - 如果祖孙三代呈直线,则旋转祖父连线,并设置原父节点为黑
 	  - 如果呈折线,则先旋转父子连线,再进行上一步操作

### 4. Treap

1. 同时具有bst和heap性质
2. 先按照bst方式插入
3. 插入后生成随机数,并根据随机数实现heap的性质,向上攀升
4. 通过旋转来攀升(插入7后再根据随机值12攀升)

![image-20210420231446858](C:\Users\PANDA\AppData\Roaming\Typora\typora-user-images\image-20210420231446858.png)

### 5. 区间树

​	用于查找指定区间是否和树中区间有overlap

1. 定义
   - 每个节点存放区间的信息
   - key是区间的**left bound**
   - 每个节点还额外存放根节点和子树区间**right bound的最大值**
2. 查找顺序(如果左没有,则右也必然没有)
   - 给定查找区间的right bound**小于等于左子树的righ bound,就找左边**



### 6. 线段树

1. 定义
     - 每个节点存放了区间的左右bound和两个子树key的sum/max
     - 从中间划分区间,**分给子树**
     - **对于长度为N的区间,需要4N的空间(应对最后一层只有1个节点的情况)**
     - **叶子节点存放实际值**

2. 修改区间值(即叶子节点)的时候,递归向上更新,每次$O(\log N)$
3. 查询区间值,**拆分区间递归查询**,每次$O(\log N)$
4. **区间更新,懒标记**
   - **区间更新是自上往下的**
   - 区间更新的时候,不更新到叶子结点,而是留下标记,等到以后遍历到该结点的时候再往下操作

