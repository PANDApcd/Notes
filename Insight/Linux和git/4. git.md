# 4. Git

### 1. git数据模型

分三种数据类型:

- blob (文件)

  ```python
  class file:
      content: bytes # 一串二进制
  ```

- tree (目录)

  ```python
  class tree:
      map: Dict[str, str] # 一个字典,从字符串(文件名)映射到**目录/文件的hash
  ```

- commit (快照)

  ```python
  class commit:
      parent: List[str] # 包含了父commit的sha-1值
      author: str # 提交者
      msg: str # 提交信息
      snapshot: str # 提交的根目录tree的SHA-1值
  ```

每个对象的存储路径为它的SHA-1值

git用引用来指向SHA-1值,并在上传时附加引用

### 2. 常用命令

#### 2.1 初始化和配置

```sh
git init # 初始化git目录
git config --global credential.helper store # 配置存储模式
git config --global user.email "panda@panchongdan@foxmail.com" # 配置email
git config --global user.name "Chongdan Pan" # 配置用户名
git config --global https.proxy https://127.0.0.1:41091 # 设置代理
git config --global http.proxy http://127.0.0.1:41091 # 设置代理
git config --global --unset http.proxy # 还原设置
```

#### 2.2 查看状态

```sh
git status # 查看当前git状态
git log [--all] [--graph]# 查看log
git cat-file -p <hash> # 根据hash值查看commit/blob/tree的内容
git branch # 查看当前分支
```

#### 2.3 提交管理

```sh
git add * [-A] # 暂存文件,并生成hash,以此可以知道文件是否有修改
git diff <file> # 查看文件改动
git stash # 删除暂存的文件
git commit -m "xxx" # 提交commit
git checkout [-b] <branch> # 转换[新建]分支
git merge <branch> # 合并分支到当前分支
git merge [--abort] [--continue] # 终止merge,conflict后继续merge
```

#### 2.4 远端操作

```sh
git remote # 列出远端
git remote add <name> <url> # 添加一个远端,name通常为origin
git clone <url> [-b <branch>] # 下拉特定分支
git pull origin <branch> # 下拉分支
git push origin <branch> # 上传分支
```

